!function(A){function n(n){for(var l,i,C=n[0],c=n[1],r=n[2],s=0,u=[];s<C.length;s++)i=C[s],Object.prototype.hasOwnProperty.call(t,i)&&t[i]&&u.push(t[i][0]),t[i]=0;for(l in c)Object.prototype.hasOwnProperty.call(c,l)&&(A[l]=c[l]);for(a&&a(n);u.length;)u.shift()();return o.push.apply(o,r||[]),e()}function e(){for(var A,n=0;n<o.length;n++){for(var e=o[n],l=!0,C=1;C<e.length;C++){var c=e[C];0!==t[c]&&(l=!1)}l&&(o.splice(n--,1),A=i(i.s=e[0]))}return A}var l={},t={1:0},o=[];function i(n){if(l[n])return l[n].exports;var e=l[n]={i:n,l:!1,exports:{}};return A[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=A,i.c=l,i.d=function(A,n,e){i.o(A,n)||Object.defineProperty(A,n,{enumerable:!0,get:e})},i.r=function(A){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},i.t=function(A,n){if(1&n&&(A=i(A)),8&n)return A;if(4&n&&"object"==typeof A&&A&&A.__esModule)return A;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:A}),2&n&&"string"!=typeof A)for(var l in A)i.d(e,l,function(n){return A[n]}.bind(null,l));return e},i.n=function(A){var n=A&&A.__esModule?function(){return A.default}:function(){return A};return i.d(n,"a",n),n},i.o=function(A,n){return Object.prototype.hasOwnProperty.call(A,n)},i.p="/d3-chart-samples";var C=window.webpackJsonp=window.webpackJsonp||[],c=C.push.bind(C);C.push=n,C=C.slice();for(var r=0;r<C.length;r++)n(C[r]);var a=c;o.push([53,0]),e()}({53:function(A,n,e){"use strict";var l,t,o,i,C,c,r=(l="/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/app.ts",t="b6b4f8f0a6199b3f7bea3fa51dd89ab71ecf65d4",o=new(0,function(){}.constructor)("return this")(),C={path:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/app.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:0},end:{line:3,column:22}},2:{start:{line:4,column:15},end:{line:4,column:32}},3:{start:{line:5,column:22},end:{line:5,column:46}},4:{start:{line:6,column:27},end:{line:6,column:30}},5:{start:{line:8,column:4},end:{line:14,column:6}},6:{start:{line:16,column:13},end:{line:16,column:52}},7:{start:{line:17,column:0},end:{line:24,column:1}},8:{start:{line:18,column:17},end:{line:22,column:5}},9:{start:{line:19,column:25},end:{line:19,column:38}},10:{start:{line:20,column:21},end:{line:20,column:46}},11:{start:{line:21,column:8},end:{line:21,column:53}},12:{start:{line:23,column:4},end:{line:23,column:42}}},fnMap:{0:{name:"getGridSpec",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:23},end:{line:15,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:23},end:{line:22,column:5}},line:18}},branchMap:{0:{loc:{start:{line:17,column:0},end:{line:24,column:1}},type:"if",locations:[{start:{line:17,column:0},end:{line:24,column:1}},{start:{line:17,column:0},end:{line:24,column:1}}],line:17}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/app.ts",sourceRoot:"",sources:["/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/app.ts"],names:[],mappings:";;AAAA,sBAAoB;AACpB,iCAAqD;AACrD,+CAA+C;AAE/C,MAAM,kBAAkB,GAAG,GAAG,CAAC;AAE/B,SAAS,WAAW;IAClB,OAAO;QACL,QAAQ,EAAE,EAAE;QACZ,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE;QACrD,aAAa,EAAE,KAAK;QACpB,kBAAkB,EAAE,kBAAkB;QACtC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE;KACpD,CAAC;AACJ,CAAC;AAED,MAAM,IAAI,GAAG,QAAQ,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;AACrD,IAAI,CAAC,CAAC,IAAI,EAAE;IACV,MAAM,IAAI,GAAG,GAAG,EAAE;QAChB,MAAM,QAAQ,GAAG,WAAW,EAAE,CAAC;QAC/B,MAAM,IAAI,GAAG,eAAQ,CAAC,QAAQ,CAAC,CAAC;QAChC,4BAAc,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACjC,CAAC,CAAC;IAEF,WAAW,CAAC,IAAI,EAAE,kBAAkB,CAAC,CAAC;CACvC",sourcesContent:["import './app.scss';\nimport { drawGrid, GridSpecification } from './grid';\nimport { updatePosition } from './grid-blocks';\n\nconst updateIntervalInMS = 300;\n\nfunction getGridSpec(): GridSpecification {\n  return {\n    cellSize: 10,\n    height: Math.floor(window.innerHeight / 10) * 10 - 20,\n    showGridLines: false,\n    updateIntervalInMS: updateIntervalInMS,\n    width: Math.floor(window.innerWidth / 10) * 10 - 20,\n  };\n}\n\nconst grid = document.getElementsByClassName('grid');\nif (!!grid) {\n  const draw = () => {\n    const gridSpec = getGridSpec();\n    const grid = drawGrid(gridSpec);\n    updatePosition(grid, gridSpec);\n  };\n\n  setInterval(draw, updateIntervalInMS);\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[i="__coverage__"]||(o[i]={}))[l]&&c[l].hash===t?c[l]:(C.hash=t,c[l]=C));r.s[0]++,Object.defineProperty(n,"__esModule",{value:!0}),r.s[1]++,e(54);const a=(r.s[2]++,e(55)),s=(r.s[3]++,e(56)),u=(r.s[4]++,300);const m=(r.s[6]++,document.getElementsByClassName("grid"));if(r.s[7]++,m){r.b[0][0]++,r.s[8]++;const A=()=>{r.f[1]++;const A=(r.s[9]++,r.f[0]++,r.s[5]++,{cellSize:10,height:10*Math.floor(window.innerHeight/10)-20,showGridLines:!1,updateIntervalInMS:u,width:10*Math.floor(window.innerWidth/10)-20}),n=(r.s[10]++,a.drawGrid(A));r.s[11]++,s.updatePosition(n,A)};r.s[12]++,setInterval(A,u)}else r.b[0][1]++},54:function(A,n,e){},55:function(A,n,e){"use strict";var l,t,o,i,C,c,r=(l="/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid.ts",t="8d077f3e8d4d92e51c401758de7dbdcb16ffb669",o=new(0,function(){}.constructor)("return this")(),C={path:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:0},end:{line:3,column:26}},2:{start:{line:4,column:23},end:{line:4,column:46}},3:{start:{line:7,column:21},end:{line:7,column:38}},4:{start:{line:8,column:24},end:{line:8,column:40}},5:{start:{line:9,column:20},end:{line:9,column:51}},6:{start:{line:10,column:23},end:{line:10,column:57}},7:{start:{line:11,column:16},end:{line:13,column:42}},8:{start:{line:14,column:4},end:{line:31,column:5}},9:{start:{line:15,column:8},end:{line:22,column:51}},10:{start:{line:18,column:29},end:{line:18,column:81}},11:{start:{line:18,column:95},end:{line:18,column:101}},12:{start:{line:18,column:113},end:{line:18,column:126}},13:{start:{line:21,column:31},end:{line:21,column:49}},14:{start:{line:22,column:31},end:{line:22,column:49}},15:{start:{line:23,column:8},end:{line:30,column:51}},16:{start:{line:26,column:29},end:{line:26,column:84}},17:{start:{line:26,column:98},end:{line:26,column:104}},18:{start:{line:26,column:116},end:{line:26,column:129}},19:{start:{line:29,column:31},end:{line:29,column:49}},20:{start:{line:30,column:31},end:{line:30,column:49}},21:{start:{line:32,column:4},end:{line:32,column:15}},22:{start:{line:34,column:0},end:{line:34,column:28}}},fnMap:{0:{name:"drawGrid",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:63},end:{line:33,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:18,column:18},end:{line:18,column:19}},loc:{start:{line:18,column:29},end:{line:18,column:81}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:18,column:83},end:{line:18,column:84}},loc:{start:{line:18,column:95},end:{line:18,column:101}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:18,column:103},end:{line:18,column:104}},loc:{start:{line:18,column:113},end:{line:18,column:126}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:21,column:24},end:{line:21,column:25}},loc:{start:{line:21,column:31},end:{line:21,column:49}},line:21},5:{name:"(anonymous_5)",decl:{start:{line:22,column:24},end:{line:22,column:25}},loc:{start:{line:22,column:31},end:{line:22,column:49}},line:22},6:{name:"(anonymous_6)",decl:{start:{line:26,column:18},end:{line:26,column:19}},loc:{start:{line:26,column:29},end:{line:26,column:84}},line:26},7:{name:"(anonymous_7)",decl:{start:{line:26,column:86},end:{line:26,column:87}},loc:{start:{line:26,column:98},end:{line:26,column:104}},line:26},8:{name:"(anonymous_8)",decl:{start:{line:26,column:106},end:{line:26,column:107}},loc:{start:{line:26,column:116},end:{line:26,column:129}},line:26},9:{name:"(anonymous_9)",decl:{start:{line:29,column:24},end:{line:29,column:25}},loc:{start:{line:29,column:31},end:{line:29,column:49}},line:29},10:{name:"(anonymous_10)",decl:{start:{line:30,column:24},end:{line:30,column:25}},loc:{start:{line:30,column:31},end:{line:30,column:49}},line:30}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:31,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:31,column:5}},{start:{line:14,column:4},end:{line:31,column:5}}],line:14}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid.ts",sourceRoot:"",sources:["/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid.ts"],names:[],mappings:";;;AAAA,+CAAiD;AAUjD,mEAAmE;AACnE,SAAgB,QAAQ,CAAC,EACvB,QAAQ,EACR,KAAK,EACL,MAAM,EACN,aAAa,GACK;IAClB,MAAM,QAAQ,GAAG,MAAM,GAAG,QAAQ,CAAC;IACnC,MAAM,WAAW,GAAG,KAAK,GAAG,QAAQ,CAAC;IACrC,MAAM,OAAO,GAAG,CAAC,GAAG,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;IAChD,MAAM,UAAU,GAAG,CAAC,GAAG,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;IAEtD,MAAM,GAAG,GAAG,qBAAM,CAAC,WAAW,CAAC;SAC5B,IAAI,CAAC,OAAO,EAAE,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC;SAC/B,IAAI,CAAC,QAAQ,EAAE,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC;IAErC,IAAI,aAAa,EAAE;QACjB,GAAG;aACA,SAAS,CAAC,iBAAiB,CAAC;aAC5B,IAAI,CAAC,OAAO,CAAC;aACb,IAAI,CACH,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAC/D,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,EAClB,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CACxB;aACA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;aACb,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;aACjB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,GAAG,CAAC;aACrC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,GAAG,CAAC,CAAC;QAEzC,GAAG;aACA,SAAS,CAAC,mBAAmB,CAAC;aAC9B,IAAI,CAAC,UAAU,CAAC;aAChB,IAAI,CACH,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,mBAAmB,CAAC,EAClE,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,EAClB,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CACxB;aACA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;aACb,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;aAClB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,GAAG,CAAC;aACrC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,QAAQ,GAAG,GAAG,CAAC,CAAC;KAC1C;IAED,OAAO,GAAG,CAAC;AACb,CAAC;AA5CD,4BA4CC",sourcesContent:["import { select, Selection } from 'd3-selection';\n\nexport type GridSpecification = {\n  cellSize: number;\n  width: number;\n  height: number;\n  showGridLines?: boolean;\n  updateIntervalInMS: number;\n};\n\n// grid lines aren't strictly necessary but make it easier to debug\nexport function drawGrid({\n  cellSize,\n  width,\n  height,\n  showGridLines,\n}: GridSpecification): Selection<d3.BaseType, unknown, HTMLElement, unknown> {\n  const rowCount = height / cellSize;\n  const columnCount = width / cellSize;\n  const rowData = [...Array(rowCount + 1).keys()];\n  const columnData = [...Array(columnCount + 1).keys()];\n\n  const svg = select('.grid svg')\n    .attr('width', `${width + 1}px`)\n    .attr('height', `${height + 1}px`);\n\n  if (showGridLines) {\n    svg\n      .selectAll('.grid__row-line')\n      .data(rowData)\n      .join(\n        (enter) => enter.append('line').attr('class', 'grid__row-line'),\n        (update) => update,\n        (exit) => exit.remove()\n      )\n      .attr('x1', 0)\n      .attr('x2', width)\n      .attr('y1', (d) => d * cellSize + 0.5)\n      .attr('y2', (d) => d * cellSize + 0.5);\n\n    svg\n      .selectAll('grid__column-line')\n      .data(columnData)\n      .join(\n        (enter) => enter.append('line').attr('class', 'grid__column-line'),\n        (update) => update,\n        (exit) => exit.remove()\n      )\n      .attr('y1', 0)\n      .attr('y2', height)\n      .attr('x1', (d) => d * cellSize + 0.5)\n      .attr('x2', (d) => d * cellSize + 0.5);\n  }\n\n  return svg;\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[i="__coverage__"]||(o[i]={}))[l]&&c[l].hash===t?c[l]:(C.hash=t,c[l]=C));r.s[0]++,Object.defineProperty(n,"__esModule",{value:!0}),r.s[1]++,n.drawGrid=void 0;const a=(r.s[2]++,e(5));r.s[22]++,n.drawGrid=function({cellSize:A,width:n,height:e,showGridLines:l}){r.f[0]++;const t=(r.s[3]++,e/A),o=(r.s[4]++,n/A),i=(r.s[5]++,[...Array(t+1).keys()]),C=(r.s[6]++,[...Array(o+1).keys()]),c=(r.s[7]++,a.select(".grid svg").attr("width",n+1+"px").attr("height",e+1+"px"));return r.s[8]++,l?(r.b[0][0]++,r.s[9]++,c.selectAll(".grid__row-line").data(i).join(A=>(r.f[1]++,r.s[10]++,A.append("line").attr("class","grid__row-line")),A=>(r.f[2]++,r.s[11]++,A),A=>(r.f[3]++,r.s[12]++,A.remove())).attr("x1",0).attr("x2",n).attr("y1",n=>(r.f[4]++,r.s[13]++,n*A+.5)).attr("y2",n=>(r.f[5]++,r.s[14]++,n*A+.5)),r.s[15]++,c.selectAll("grid__column-line").data(C).join(A=>(r.f[6]++,r.s[16]++,A.append("line").attr("class","grid__column-line")),A=>(r.f[7]++,r.s[17]++,A),A=>(r.f[8]++,r.s[18]++,A.remove())).attr("y1",0).attr("y2",e).attr("x1",n=>(r.f[9]++,r.s[19]++,n*A+.5)).attr("x2",n=>(r.f[10]++,r.s[20]++,n*A+.5))):r.b[0][1]++,r.s[21]++,c}},56:function(A,n,e){"use strict";var l,t,o,i,C,c,r=(l="/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid-blocks.ts",t="70d740789e0c7e7e7df0f364745f93d4382498e0",o=new(0,function(){}.constructor)("return this")(),C={path:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid-blocks.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:0},end:{line:3,column:32}},2:{start:{line:4,column:23},end:{line:4,column:46}},3:{start:{line:5,column:18},end:{line:5,column:36}},4:{start:{line:6,column:0},end:{line:6,column:25}},5:{start:{line:7,column:15},end:{line:16,column:1}},6:{start:{line:18,column:4},end:{line:18,column:32}},7:{start:{line:19,column:4},end:{line:19,column:24}},8:{start:{line:20,column:4},end:{line:20,column:24}},9:{start:{line:23,column:4},end:{line:23,column:27}},10:{start:{line:24,column:4},end:{line:24,column:17}},11:{start:{line:27,column:4},end:{line:27,column:27}},12:{start:{line:28,column:4},end:{line:28,column:17}},13:{start:{line:31,column:4},end:{line:37,column:6}},14:{start:{line:39,column:35},end:{line:63,column:1}},15:{start:{line:40,column:17},end:{line:40,column:55}},16:{start:{line:41,column:17},end:{line:41,column:56}},17:{start:{line:42,column:4},end:{line:62,column:5}},18:{start:{line:43,column:34},end:{line:43,column:97}},19:{start:{line:44,column:34},end:{line:44,column:97}},20:{start:{line:45,column:8},end:{line:60,column:9}},21:{start:{line:46,column:12},end:{line:46,column:34}},22:{start:{line:47,column:12},end:{line:47,column:34}},23:{start:{line:48,column:12},end:{line:48,column:62}},24:{start:{line:50,column:13},end:{line:60,column:9}},25:{start:{line:51,column:12},end:{line:51,column:34}},26:{start:{line:52,column:12},end:{line:52,column:78}},27:{start:{line:54,column:13},end:{line:60,column:9}},28:{start:{line:55,column:12},end:{line:55,column:34}},29:{start:{line:56,column:12},end:{line:56,column:78}},30:{start:{line:61,column:8},end:{line:61,column:33}},31:{start:{line:65,column:4},end:{line:69,column:43}},32:{start:{line:66,column:26},end:{line:66,column:49}},33:{start:{line:67,column:26},end:{line:67,column:49}},34:{start:{line:72,column:4},end:{line:72,column:41}},35:{start:{line:73,column:23},end:{line:73,column:66}},36:{start:{line:74,column:4},end:{line:85,column:47}},37:{start:{line:77,column:30},end:{line:77,column:111}},38:{start:{line:83,column:8},end:{line:83,column:256}},39:{start:{line:86,column:4},end:{line:86,column:31}},40:{start:{line:87,column:4},end:{line:91,column:47}},41:{start:{line:93,column:0},end:{line:93,column:40}}},fnMap:{0:{name:"moveToNewPosition",decl:{start:{line:17,column:9},end:{line:17,column:26}},loc:{start:{line:17,column:30},end:{line:21,column:1}},line:17},1:{name:"flipYDirection",decl:{start:{line:22,column:9},end:{line:22,column:23}},loc:{start:{line:22,column:31},end:{line:25,column:1}},line:22},2:{name:"flipXDirection",decl:{start:{line:26,column:9},end:{line:26,column:23}},loc:{start:{line:26,column:31},end:{line:29,column:1}},line:26},3:{name:"spawnNewBlock",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:30},end:{line:38,column:1}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:39,column:35},end:{line:39,column:36}},loc:{start:{line:39,column:49},end:{line:63,column:1}},line:39},5:{name:"drawNewBlockPositions",decl:{start:{line:64,column:9},end:{line:64,column:30}},loc:{start:{line:64,column:52},end:{line:70,column:1}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:66,column:19},end:{line:66,column:20}},loc:{start:{line:66,column:26},end:{line:66,column:49}},line:66},7:{name:"(anonymous_7)",decl:{start:{line:67,column:19},end:{line:67,column:20}},loc:{start:{line:67,column:26},end:{line:67,column:49}},line:67},8:{name:"updatePosition",decl:{start:{line:71,column:9},end:{line:71,column:23}},loc:{start:{line:71,column:40},end:{line:92,column:1}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:77,column:23},end:{line:77,column:24}},loc:{start:{line:77,column:30},end:{line:77,column:111}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:81,column:21},end:{line:81,column:22}},loc:{start:{line:81,column:41},end:{line:84,column:5}},line:81}},branchMap:{0:{loc:{start:{line:43,column:34},end:{line:43,column:97}},type:"binary-expr",locations:[{start:{line:43,column:34},end:{line:43,column:58}},{start:{line:43,column:63},end:{line:43,column:76}},{start:{line:43,column:80},end:{line:43,column:96}}],line:43},1:{loc:{start:{line:44,column:34},end:{line:44,column:97}},type:"binary-expr",locations:[{start:{line:44,column:34},end:{line:44,column:58}},{start:{line:44,column:63},end:{line:44,column:76}},{start:{line:44,column:80},end:{line:44,column:96}}],line:44},2:{loc:{start:{line:45,column:8},end:{line:60,column:9}},type:"if",locations:[{start:{line:45,column:8},end:{line:60,column:9}},{start:{line:45,column:8},end:{line:60,column:9}}],line:45},3:{loc:{start:{line:45,column:12},end:{line:45,column:50}},type:"binary-expr",locations:[{start:{line:45,column:12},end:{line:45,column:29}},{start:{line:45,column:33},end:{line:45,column:50}}],line:45},4:{loc:{start:{line:48,column:12},end:{line:48,column:61}},type:"binary-expr",locations:[{start:{line:48,column:12},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:61}}],line:48},5:{loc:{start:{line:50,column:13},end:{line:60,column:9}},type:"if",locations:[{start:{line:50,column:13},end:{line:60,column:9}},{start:{line:50,column:13},end:{line:60,column:9}}],line:50},6:{loc:{start:{line:52,column:12},end:{line:52,column:77}},type:"binary-expr",locations:[{start:{line:52,column:12},end:{line:52,column:24}},{start:{line:52,column:28},end:{line:52,column:77}}],line:52},7:{loc:{start:{line:54,column:13},end:{line:60,column:9}},type:"if",locations:[{start:{line:54,column:13},end:{line:60,column:9}},{start:{line:54,column:13},end:{line:60,column:9}}],line:54},8:{loc:{start:{line:56,column:12},end:{line:56,column:77}},type:"binary-expr",locations:[{start:{line:56,column:12},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:77}}],line:56},9:{loc:{start:{line:77,column:30},end:{line:77,column:111}},type:"cond-expr",locations:[{start:{line:77,column:41},end:{line:77,column:72}},{start:{line:77,column:75},end:{line:77,column:111}}],line:77},10:{loc:{start:{line:83,column:8},end:{line:83,column:255}},type:"cond-expr",locations:[{start:{line:83,column:71},end:{line:83,column:77}},{start:{line:83,column:80},end:{line:83,column:255}}],line:83},11:{loc:{start:{line:83,column:8},end:{line:83,column:68}},type:"binary-expr",locations:[{start:{line:83,column:8},end:{line:83,column:51}},{start:{line:83,column:55},end:{line:83,column:68}}],line:83}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:"/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid-blocks.ts",sourceRoot:"",sources:["/home/runner/work/d3-chart-samples/d3-chart-samples/src/blocks/grid-blocks.ts"],names:[],mappings:"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",sourcesContent:["import { GridSpecification } from './grid';\nimport { select, Selection, BaseType } from 'd3-selection';\nimport { Transition } from 'd3-transition';\nimport { easeLinear } from 'd3-ease';\nimport 'd3-transition';\n\ntype Block = {\n  x: number;\n  y: number;\n  nextMove: { x: number; y: number };\n  isMain: boolean;\n  startPosition: { x: number; y: number };\n  hasMovedSinceSpawn: boolean;\n};\n\nconst blocks: Block[] = [\n  {\n    nextMove: { x: 1, y: 1 },\n    isMain: true,\n    x: 0,\n    y: 0,\n    startPosition: { x: 0, y: 0 },\n    hasMovedSinceSpawn: false,\n  },\n];\n\nfunction moveToNewPosition(b: Block) {\n  b.hasMovedSinceSpawn = true;\n  b.x += b.nextMove.x;\n  b.y += b.nextMove.y;\n}\n\nfunction flipYDirection(block: Block) {\n  block.nextMove.y *= -1;\n  return block;\n}\nfunction flipXDirection(block: Block) {\n  block.nextMove.x *= -1;\n  return block;\n}\n\nfunction spawnNewBlock(block: Block) {\n  return {\n    ...block,\n    isMain: false,\n    hasMovedSinceSpawn: false,\n    nextMove: { ...block.nextMove },\n    startPosition: { x: block.x, y: block.y },\n  };\n}\n\nconst calculateNewBlockPositions = (gridSpec: GridSpecification) => {\n  const maxX = gridSpec.width / gridSpec.cellSize - 1;\n  const maxY = gridSpec.height / gridSpec.cellSize - 1;\n  for (const block of blocks) {\n    const atTopOrBottomEdge = block.hasMovedSinceSpawn && (block.y === 0 || block.y === maxY);\n    const atLeftOrRightEdge = block.hasMovedSinceSpawn && (block.x === 0 || block.x === maxX);\n\n    if (atTopOrBottomEdge && atLeftOrRightEdge) {\n      flipXDirection(block);\n      flipYDirection(block);\n      block.isMain && blocks.push(spawnNewBlock(block));\n    } else if (atTopOrBottomEdge) {\n      flipYDirection(block);\n      block.isMain && blocks.push(flipXDirection(spawnNewBlock(block)));\n    } else if (atLeftOrRightEdge) {\n      flipXDirection(block);\n      block.isMain && blocks.push(flipYDirection(spawnNewBlock(block)));\n    } else {\n      // todo check if out of bounds\n    }\n\n    moveToNewPosition(block);\n  }\n};\n\nfunction drawNewBlockPositions(\n  selection: Transition<SVGRectElement, Block, BaseType, unknown>,\n  gridSpec: GridSpecification\n) {\n  selection\n    .attr('x', (d) => d.x * gridSpec.cellSize)\n    .attr('y', (d) => d.y * gridSpec.cellSize)\n    .attr('width', gridSpec.cellSize)\n    .attr('height', gridSpec.cellSize);\n}\n\nexport function updatePosition(\n  grid: Selection<BaseType, unknown, HTMLElement, unknown>,\n  gridSpec: GridSpecification\n): void {\n  calculateNewBlockPositions(gridSpec);\n  const blocksElem = grid.selectAll<SVGRectElement, Block>('.grid__block').data(blocks);\n\n  blocksElem\n    .enter()\n    .append<SVGRectElement>('rect')\n    .attr('class', (d) =>\n      d.isMain ? 'grid__block grid__block--main' : 'grid__block grid__block--secondary'\n    )\n    .transition()\n    .duration(gridSpec.updateIntervalInMS)\n    .ease(easeLinear)\n    .on('start', function (block, i) {\n      select(this)\n        ?.attr('x', block.startPosition.x * gridSpec.cellSize)\n        .attr('y', block.startPosition.y * gridSpec.cellSize)\n        .attr('width', gridSpec.cellSize)\n        .attr('height', gridSpec.cellSize);\n    })\n    .call(drawNewBlockPositions, gridSpec);\n\n  blocksElem.exit().remove();\n  blocksElem\n    .transition()\n    .duration(gridSpec.updateIntervalInMS)\n    .ease(easeLinear)\n    .call(drawNewBlockPositions, gridSpec);\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[i="__coverage__"]||(o[i]={}))[l]&&c[l].hash===t?c[l]:(C.hash=t,c[l]=C));r.s[0]++,Object.defineProperty(n,"__esModule",{value:!0}),r.s[1]++,n.updatePosition=void 0;const a=(r.s[2]++,e(5)),s=(r.s[3]++,e(47));r.s[4]++,e(28);const u=(r.s[5]++,[{nextMove:{x:1,y:1},isMain:!0,x:0,y:0,startPosition:{x:0,y:0},hasMovedSinceSpawn:!1}]);function m(A){return r.f[1]++,r.s[9]++,A.nextMove.y*=-1,r.s[10]++,A}function d(A){return r.f[2]++,r.s[11]++,A.nextMove.x*=-1,r.s[12]++,A}function E(A){return r.f[3]++,r.s[13]++,{...A,isMain:!1,hasMovedSinceSpawn:!1,nextMove:{...A.nextMove},startPosition:{x:A.x,y:A.y}}}r.s[14]++;function p(A,n){r.f[5]++,r.s[31]++,A.attr("x",A=>(r.f[6]++,r.s[32]++,A.x*n.cellSize)).attr("y",A=>(r.f[7]++,r.s[33]++,A.y*n.cellSize)).attr("width",n.cellSize).attr("height",n.cellSize)}r.s[41]++,n.updatePosition=function(A,n){r.f[8]++,r.s[34]++,(A=>{r.f[4]++;const n=(r.s[15]++,A.width/A.cellSize-1),e=(r.s[16]++,A.height/A.cellSize-1);r.s[17]++;for(const A of u){const t=(r.s[18]++,r.b[0][0]++,A.hasMovedSinceSpawn&&(r.b[0][1]++,0===A.y||(r.b[0][2]++,A.y===e))),o=(r.s[19]++,r.b[1][0]++,A.hasMovedSinceSpawn&&(r.b[1][1]++,0===A.x||(r.b[1][2]++,A.x===n)));r.s[20]++,r.b[3][0]++,t&&(r.b[3][1]++,o)?(r.b[2][0]++,r.s[21]++,d(A),r.s[22]++,m(A),r.s[23]++,r.b[4][0]++,A.isMain&&(r.b[4][1]++,u.push(E(A)))):(r.b[2][1]++,r.s[24]++,t?(r.b[5][0]++,r.s[25]++,m(A),r.s[26]++,r.b[6][0]++,A.isMain&&(r.b[6][1]++,u.push(d(E(A))))):(r.b[5][1]++,r.s[27]++,o?(r.b[7][0]++,r.s[28]++,d(A),r.s[29]++,r.b[8][0]++,A.isMain&&(r.b[8][1]++,u.push(m(E(A))))):r.b[7][1]++)),r.s[30]++,l=A,r.f[0]++,r.s[6]++,l.hasMovedSinceSpawn=!0,r.s[7]++,l.x+=l.nextMove.x,r.s[8]++,l.y+=l.nextMove.y}var l})(n);const e=(r.s[35]++,A.selectAll(".grid__block").data(u));r.s[36]++,e.enter().append("rect").attr("class",A=>(r.f[9]++,r.s[37]++,A.isMain?(r.b[9][0]++,"grid__block grid__block--main"):(r.b[9][1]++,"grid__block grid__block--secondary"))).transition().duration(n.updateIntervalInMS).ease(s.easeLinear).on("start",(function(A,e){var l;r.f[10]++,r.s[38]++,r.b[11][0]++,null===(l=a.select(this))||(r.b[11][1]++,void 0===l)?r.b[10][0]++:(r.b[10][1]++,l.attr("x",A.startPosition.x*n.cellSize).attr("y",A.startPosition.y*n.cellSize).attr("width",n.cellSize).attr("height",n.cellSize))})).call(p,n),r.s[39]++,e.exit().remove(),r.s[40]++,e.transition().duration(n.updateIntervalInMS).ease(s.easeLinear).call(p,n)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYmxvY2tzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9ibG9ja3MvZ3JpZC50cyIsIndlYnBhY2s6Ly8vLi9ibG9ja3MvZ3JpZC1ibG9ja3MudHMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIxIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJyZXF1aXJlIiwiZ3JpZF8xIiwiZ3JpZF9ibG9ja3NfMSIsInVwZGF0ZUludGVydmFsSW5NUyIsImdyaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJkcmF3IiwiZ3JpZFNwZWMiLCJjZWxsU2l6ZSIsImhlaWdodCIsIk1hdGgiLCJmbG9vciIsImlubmVySGVpZ2h0Iiwic2hvd0dyaWRMaW5lcyIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImRyYXdHcmlkIiwidXBkYXRlUG9zaXRpb24iLCJzZXRJbnRlcnZhbCIsImQzX3NlbGVjdGlvbl8xIiwicm93Q291bnQiLCJjb2x1bW5Db3VudCIsInJvd0RhdGEiLCJBcnJheSIsImtleXMiLCJjb2x1bW5EYXRhIiwic3ZnIiwic2VsZWN0IiwiYXR0ciIsInNlbGVjdEFsbCIsImpvaW4iLCJlbnRlciIsImFwcGVuZCIsInVwZGF0ZSIsImV4aXQiLCJyZW1vdmUiLCJkM19lYXNlXzEiLCJibG9ja3MiLCJuZXh0TW92ZSIsIngiLCJ5IiwiaXNNYWluIiwic3RhcnRQb3NpdGlvbiIsImhhc01vdmVkU2luY2VTcGF3biIsImZsaXBZRGlyZWN0aW9uIiwiYmxvY2siLCJmbGlwWERpcmVjdGlvbiIsInNwYXduTmV3QmxvY2siLCJkcmF3TmV3QmxvY2tQb3NpdGlvbnMiLCJzZWxlY3Rpb24iLCJtYXhYIiwibWF4WSIsImF0VG9wT3JCb3R0b21FZGdlIiwiYiIsImF0TGVmdE9yUmlnaHRFZGdlIiwiY2FsY3VsYXRlTmV3QmxvY2tQb3NpdGlvbnMiLCJibG9ja3NFbGVtIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiZWFzZSIsImVhc2VMaW5lYXIiLCJvbiIsIl9hIiwidGhpcyJdLCJtYXBwaW5ncyI6ImFBQ0UsU0FBU0EsRUFBcUJDLEdBUTdCLElBUEEsSUFNSUMsRUFBVUMsRUFOVkMsRUFBV0gsRUFBSyxHQUNoQkksRUFBY0osRUFBSyxHQUNuQkssRUFBaUJMLEVBQUssR0FJSE0sRUFBSSxFQUFHQyxFQUFXLEdBQ3BDRCxFQUFJSCxFQUFTSyxPQUFRRixJQUN6QkosRUFBVUMsRUFBU0csR0FDaEJHLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtDLEVBQWlCWCxJQUFZVyxFQUFnQlgsSUFDcEZLLEVBQVNPLEtBQUtELEVBQWdCWCxH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U0MsVUFBVW9CLEtBQUssSUFBS2lCLEVBQU1ILGNBQWNGLEVBQUlqQyxFQUFTQyxVQUFVb0IsS0FBSyxRQUFTckIsRUFBU0MsVUFBVW9CLEtBQUssU0FBVXJCLEVBQVNDLGNBRTdPM0QsS0FBS21HLEVBQXVCekMsR0FkRyxVQWVwQ2lELEVBQVd0QixPQUFPQyxTQWZrQixVQWdCcENxQixFQUNLQyxhQUNBQyxTQUFTbkQsRUFBU0wsb0JBQ2xCeUQsS0FBS3ZCLEVBQVV3QixZQUNmL0csS0FBS21HLEVBQXVCekMiLCJmaWxlIjoic2NyaXB0cy9ibG9ja3MuMzc1MDIxNDQwMDU2ZjlkMDk5OTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDE6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZDMtY2hhcnQtc2FtcGxlc1wiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbNTMsMF0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnJlcXVpcmUoXCIuL2FwcC5zY3NzXCIpO1xuY29uc3QgZ3JpZF8xID0gcmVxdWlyZShcIi4vZ3JpZFwiKTtcbmNvbnN0IGdyaWRfYmxvY2tzXzEgPSByZXF1aXJlKFwiLi9ncmlkLWJsb2Nrc1wiKTtcbmNvbnN0IHVwZGF0ZUludGVydmFsSW5NUyA9IDMwMDtcbmZ1bmN0aW9uIGdldEdyaWRTcGVjKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNlbGxTaXplOiAxMCxcbiAgICAgICAgaGVpZ2h0OiBNYXRoLmZsb29yKHdpbmRvdy5pbm5lckhlaWdodCAvIDEwKSAqIDEwIC0gMjAsXG4gICAgICAgIHNob3dHcmlkTGluZXM6IGZhbHNlLFxuICAgICAgICB1cGRhdGVJbnRlcnZhbEluTVM6IHVwZGF0ZUludGVydmFsSW5NUyxcbiAgICAgICAgd2lkdGg6IE1hdGguZmxvb3Iod2luZG93LmlubmVyV2lkdGggLyAxMCkgKiAxMCAtIDIwLFxuICAgIH07XG59XG5jb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JpZCcpO1xuaWYgKCEhZ3JpZCkge1xuICAgIGNvbnN0IGRyYXcgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdyaWRTcGVjID0gZ2V0R3JpZFNwZWMoKTtcbiAgICAgICAgY29uc3QgZ3JpZCA9IGdyaWRfMS5kcmF3R3JpZChncmlkU3BlYyk7XG4gICAgICAgIGdyaWRfYmxvY2tzXzEudXBkYXRlUG9zaXRpb24oZ3JpZCwgZ3JpZFNwZWMpO1xuICAgIH07XG4gICAgc2V0SW50ZXJ2YWwoZHJhdywgdXBkYXRlSW50ZXJ2YWxJbk1TKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kcmF3R3JpZCA9IHZvaWQgMDtcbmNvbnN0IGQzX3NlbGVjdGlvbl8xID0gcmVxdWlyZShcImQzLXNlbGVjdGlvblwiKTtcbi8vIGdyaWQgbGluZXMgYXJlbid0IHN0cmljdGx5IG5lY2Vzc2FyeSBidXQgbWFrZSBpdCBlYXNpZXIgdG8gZGVidWdcbmZ1bmN0aW9uIGRyYXdHcmlkKHsgY2VsbFNpemUsIHdpZHRoLCBoZWlnaHQsIHNob3dHcmlkTGluZXMsIH0pIHtcbiAgICBjb25zdCByb3dDb3VudCA9IGhlaWdodCAvIGNlbGxTaXplO1xuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gd2lkdGggLyBjZWxsU2l6ZTtcbiAgICBjb25zdCByb3dEYXRhID0gWy4uLkFycmF5KHJvd0NvdW50ICsgMSkua2V5cygpXTtcbiAgICBjb25zdCBjb2x1bW5EYXRhID0gWy4uLkFycmF5KGNvbHVtbkNvdW50ICsgMSkua2V5cygpXTtcbiAgICBjb25zdCBzdmcgPSBkM19zZWxlY3Rpb25fMS5zZWxlY3QoJy5ncmlkIHN2ZycpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGAke3dpZHRoICsgMX1weGApXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBgJHtoZWlnaHQgKyAxfXB4YCk7XG4gICAgaWYgKHNob3dHcmlkTGluZXMpIHtcbiAgICAgICAgc3ZnXG4gICAgICAgICAgICAuc2VsZWN0QWxsKCcuZ3JpZF9fcm93LWxpbmUnKVxuICAgICAgICAgICAgLmRhdGEocm93RGF0YSlcbiAgICAgICAgICAgIC5qb2luKChlbnRlcikgPT4gZW50ZXIuYXBwZW5kKCdsaW5lJykuYXR0cignY2xhc3MnLCAnZ3JpZF9fcm93LWxpbmUnKSwgKHVwZGF0ZSkgPT4gdXBkYXRlLCAoZXhpdCkgPT4gZXhpdC5yZW1vdmUoKSlcbiAgICAgICAgICAgIC5hdHRyKCd4MScsIDApXG4gICAgICAgICAgICAuYXR0cigneDInLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCd5MScsIChkKSA9PiBkICogY2VsbFNpemUgKyAwLjUpXG4gICAgICAgICAgICAuYXR0cigneTInLCAoZCkgPT4gZCAqIGNlbGxTaXplICsgMC41KTtcbiAgICAgICAgc3ZnXG4gICAgICAgICAgICAuc2VsZWN0QWxsKCdncmlkX19jb2x1bW4tbGluZScpXG4gICAgICAgICAgICAuZGF0YShjb2x1bW5EYXRhKVxuICAgICAgICAgICAgLmpvaW4oKGVudGVyKSA9PiBlbnRlci5hcHBlbmQoJ2xpbmUnKS5hdHRyKCdjbGFzcycsICdncmlkX19jb2x1bW4tbGluZScpLCAodXBkYXRlKSA9PiB1cGRhdGUsIChleGl0KSA9PiBleGl0LnJlbW92ZSgpKVxuICAgICAgICAgICAgLmF0dHIoJ3kxJywgMClcbiAgICAgICAgICAgIC5hdHRyKCd5MicsIGhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKCd4MScsIChkKSA9PiBkICogY2VsbFNpemUgKyAwLjUpXG4gICAgICAgICAgICAuYXR0cigneDInLCAoZCkgPT4gZCAqIGNlbGxTaXplICsgMC41KTtcbiAgICB9XG4gICAgcmV0dXJuIHN2Zztcbn1cbmV4cG9ydHMuZHJhd0dyaWQgPSBkcmF3R3JpZDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy51cGRhdGVQb3NpdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGQzX3NlbGVjdGlvbl8xID0gcmVxdWlyZShcImQzLXNlbGVjdGlvblwiKTtcbmNvbnN0IGQzX2Vhc2VfMSA9IHJlcXVpcmUoXCJkMy1lYXNlXCIpO1xucmVxdWlyZShcImQzLXRyYW5zaXRpb25cIik7XG5jb25zdCBibG9ja3MgPSBbXG4gICAge1xuICAgICAgICBuZXh0TW92ZTogeyB4OiAxLCB5OiAxIH0sXG4gICAgICAgIGlzTWFpbjogdHJ1ZSxcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgc3RhcnRQb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIGhhc01vdmVkU2luY2VTcGF3bjogZmFsc2UsXG4gICAgfSxcbl07XG5mdW5jdGlvbiBtb3ZlVG9OZXdQb3NpdGlvbihiKSB7XG4gICAgYi5oYXNNb3ZlZFNpbmNlU3Bhd24gPSB0cnVlO1xuICAgIGIueCArPSBiLm5leHRNb3ZlLng7XG4gICAgYi55ICs9IGIubmV4dE1vdmUueTtcbn1cbmZ1bmN0aW9uIGZsaXBZRGlyZWN0aW9uKGJsb2NrKSB7XG4gICAgYmxvY2submV4dE1vdmUueSAqPSAtMTtcbiAgICByZXR1cm4gYmxvY2s7XG59XG5mdW5jdGlvbiBmbGlwWERpcmVjdGlvbihibG9jaykge1xuICAgIGJsb2NrLm5leHRNb3ZlLnggKj0gLTE7XG4gICAgcmV0dXJuIGJsb2NrO1xufVxuZnVuY3Rpb24gc3Bhd25OZXdCbG9jayhibG9jaykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJsb2NrLFxuICAgICAgICBpc01haW46IGZhbHNlLFxuICAgICAgICBoYXNNb3ZlZFNpbmNlU3Bhd246IGZhbHNlLFxuICAgICAgICBuZXh0TW92ZTogeyAuLi5ibG9jay5uZXh0TW92ZSB9LFxuICAgICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IGJsb2NrLngsIHk6IGJsb2NrLnkgfSxcbiAgICB9O1xufVxuY29uc3QgY2FsY3VsYXRlTmV3QmxvY2tQb3NpdGlvbnMgPSAoZ3JpZFNwZWMpID0+IHtcbiAgICBjb25zdCBtYXhYID0gZ3JpZFNwZWMud2lkdGggLyBncmlkU3BlYy5jZWxsU2l6ZSAtIDE7XG4gICAgY29uc3QgbWF4WSA9IGdyaWRTcGVjLmhlaWdodCAvIGdyaWRTcGVjLmNlbGxTaXplIC0gMTtcbiAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGJsb2Nrcykge1xuICAgICAgICBjb25zdCBhdFRvcE9yQm90dG9tRWRnZSA9IGJsb2NrLmhhc01vdmVkU2luY2VTcGF3biAmJiAoYmxvY2sueSA9PT0gMCB8fCBibG9jay55ID09PSBtYXhZKTtcbiAgICAgICAgY29uc3QgYXRMZWZ0T3JSaWdodEVkZ2UgPSBibG9jay5oYXNNb3ZlZFNpbmNlU3Bhd24gJiYgKGJsb2NrLnggPT09IDAgfHwgYmxvY2sueCA9PT0gbWF4WCk7XG4gICAgICAgIGlmIChhdFRvcE9yQm90dG9tRWRnZSAmJiBhdExlZnRPclJpZ2h0RWRnZSkge1xuICAgICAgICAgICAgZmxpcFhEaXJlY3Rpb24oYmxvY2spO1xuICAgICAgICAgICAgZmxpcFlEaXJlY3Rpb24oYmxvY2spO1xuICAgICAgICAgICAgYmxvY2suaXNNYWluICYmIGJsb2Nrcy5wdXNoKHNwYXduTmV3QmxvY2soYmxvY2spKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhdFRvcE9yQm90dG9tRWRnZSkge1xuICAgICAgICAgICAgZmxpcFlEaXJlY3Rpb24oYmxvY2spO1xuICAgICAgICAgICAgYmxvY2suaXNNYWluICYmIGJsb2Nrcy5wdXNoKGZsaXBYRGlyZWN0aW9uKHNwYXduTmV3QmxvY2soYmxvY2spKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXRMZWZ0T3JSaWdodEVkZ2UpIHtcbiAgICAgICAgICAgIGZsaXBYRGlyZWN0aW9uKGJsb2NrKTtcbiAgICAgICAgICAgIGJsb2NrLmlzTWFpbiAmJiBibG9ja3MucHVzaChmbGlwWURpcmVjdGlvbihzcGF3bk5ld0Jsb2NrKGJsb2NrKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdG9kbyBjaGVjayBpZiBvdXQgb2YgYm91bmRzXG4gICAgICAgIH1cbiAgICAgICAgbW92ZVRvTmV3UG9zaXRpb24oYmxvY2spO1xuICAgIH1cbn07XG5mdW5jdGlvbiBkcmF3TmV3QmxvY2tQb3NpdGlvbnMoc2VsZWN0aW9uLCBncmlkU3BlYykge1xuICAgIHNlbGVjdGlvblxuICAgICAgICAuYXR0cigneCcsIChkKSA9PiBkLnggKiBncmlkU3BlYy5jZWxsU2l6ZSlcbiAgICAgICAgLmF0dHIoJ3knLCAoZCkgPT4gZC55ICogZ3JpZFNwZWMuY2VsbFNpemUpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGdyaWRTcGVjLmNlbGxTaXplKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgZ3JpZFNwZWMuY2VsbFNpemUpO1xufVxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oZ3JpZCwgZ3JpZFNwZWMpIHtcbiAgICBjYWxjdWxhdGVOZXdCbG9ja1Bvc2l0aW9ucyhncmlkU3BlYyk7XG4gICAgY29uc3QgYmxvY2tzRWxlbSA9IGdyaWQuc2VsZWN0QWxsKCcuZ3JpZF9fYmxvY2snKS5kYXRhKGJsb2Nrcyk7XG4gICAgYmxvY2tzRWxlbVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQpID0+IGQuaXNNYWluID8gJ2dyaWRfX2Jsb2NrIGdyaWRfX2Jsb2NrLS1tYWluJyA6ICdncmlkX19ibG9jayBncmlkX19ibG9jay0tc2Vjb25kYXJ5JylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oZ3JpZFNwZWMudXBkYXRlSW50ZXJ2YWxJbk1TKVxuICAgICAgICAuZWFzZShkM19lYXNlXzEuZWFzZUxpbmVhcilcbiAgICAgICAgLm9uKCdzdGFydCcsIGZ1bmN0aW9uIChibG9jaywgaSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGQzX3NlbGVjdGlvbl8xLnNlbGVjdCh0aGlzKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmF0dHIoJ3gnLCBibG9jay5zdGFydFBvc2l0aW9uLnggKiBncmlkU3BlYy5jZWxsU2l6ZSkuYXR0cigneScsIGJsb2NrLnN0YXJ0UG9zaXRpb24ueSAqIGdyaWRTcGVjLmNlbGxTaXplKS5hdHRyKCd3aWR0aCcsIGdyaWRTcGVjLmNlbGxTaXplKS5hdHRyKCdoZWlnaHQnLCBncmlkU3BlYy5jZWxsU2l6ZSk7XG4gICAgfSlcbiAgICAgICAgLmNhbGwoZHJhd05ld0Jsb2NrUG9zaXRpb25zLCBncmlkU3BlYyk7XG4gICAgYmxvY2tzRWxlbS5leGl0KCkucmVtb3ZlKCk7XG4gICAgYmxvY2tzRWxlbVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihncmlkU3BlYy51cGRhdGVJbnRlcnZhbEluTVMpXG4gICAgICAgIC5lYXNlKGQzX2Vhc2VfMS5lYXNlTGluZWFyKVxuICAgICAgICAuY2FsbChkcmF3TmV3QmxvY2tQb3NpdGlvbnMsIGdyaWRTcGVjKTtcbn1cbmV4cG9ydHMudXBkYXRlUG9zaXRpb24gPSB1cGRhdGVQb3NpdGlvbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=